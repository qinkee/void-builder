<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VNC Pod Manager API ÊµãËØï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .test-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        h2 {
            color: #333;
            font-size: 1.5rem;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #00b09b 0%, #96c93d 100%);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 176, 155, 0.4);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(250, 112, 154, 0.4);
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        input[type="text"], input[type="number"], select {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus, input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .response-box {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-success {
            background: #4caf50;
            animation: pulse 2s infinite;
        }
        
        .status-error {
            background: #f44336;
        }
        
        .status-loading {
            background: #ff9800;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .pod-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .pod-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 8px;
            padding: 15px;
            position: relative;
            transition: transform 0.3s;
        }
        
        .pod-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .pod-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .pod-info {
            font-size: 12px;
            color: #666;
            margin: 5px 0;
        }
        
        .pod-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .pod-actions .btn {
            padding: 5px 10px;
            font-size: 12px;
        }
        
        .config-section {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .config-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .config-label {
            width: 150px;
            font-weight: bold;
            color: #555;
        }
        
        .config-value {
            flex: 1;
            padding: 8px;
            background: white;
            border-radius: 3px;
            font-family: monospace;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .error-message {
            background: #fee;
            color: #c33;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .success-message {
            background: #efe;
            color: #3c3;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ VNC Pod Manager API ÊµãËØïÈù¢Êùø</h1>
        
        <!-- ÈÖçÁΩÆÈÉ®ÂàÜ -->
        <div class="test-section">
            <h2>‚öôÔ∏è API ÈÖçÁΩÆ</h2>
            <div class="config-section">
                <div class="config-item">
                    <span class="config-label">API Âú∞ÂùÄÔºö</span>
                    <input type="text" id="apiUrlInput" value="http://api.vnc.service.thinkgs.cn" style="flex: 1; margin-left: 10px;">
                </div>
                <div class="config-item">
                    <span class="config-label">TokenÔºö</span>
                    <input type="text" id="apiTokenInput" value="sk-njHDNMrSaVZH0MNQFd8607F6E52d4a5386Aa88A68f5583A1" style="flex: 1; margin-left: 10px;">
                </div>
                <div class="config-item" style="margin-top: 15px;">
                    <button class="btn btn-primary" onclick="updateConfig()">Êõ¥Êñ∞ÈÖçÁΩÆ</button>
                    <button class="btn btn-success" onclick="saveToken()">‰øùÂ≠òToken</button>
                    <button class="btn btn-warning" onclick="loadSavedTokens()">Âä†ËΩΩÂ∑≤‰øùÂ≠òÁöÑToken</button>
                </div>
                <div class="config-item" style="margin-top: 10px;">
                    <span class="config-label">Âø´ÈÄüÂàáÊç¢Ôºö</span>
                    <select id="tokenSelector" onchange="selectToken()" style="flex: 1; margin-left: 10px;">
                        <option value="">ÈÄâÊã©Â∑≤‰øùÂ≠òÁöÑToken...</option>
                    </select>
                </div>
                <div id="configStatus" style="margin-top: 10px; padding: 10px; display: none;"></div>
            </div>
        </div>
        
        <!-- ÂÅ•Â∫∑Ê£ÄÊü• -->
        <div class="test-section">
            <div class="test-header">
                <h2>üíì ÂÅ•Â∫∑Ê£ÄÊü•</h2>
                <span id="healthStatus"></span>
            </div>
            <button class="btn btn-primary" onclick="checkHealth()">Ê£ÄÊü• API ÂÅ•Â∫∑Áä∂ÊÄÅ</button>
            <button class="btn btn-primary" onclick="checkReady()">Ê£ÄÊü•Â∞±Áª™Áä∂ÊÄÅ</button>
            <div id="healthResponse" class="response-box" style="display:none;"></div>
        </div>
        
        <!-- ÂàõÂª∫ Pod -->
        <div class="test-section">
            <div class="test-header">
                <h2>‚ûï ÂàõÂª∫ VNC Pod</h2>
            </div>
            <div class="input-group">
                <input type="text" id="createPodName" placeholder="PodÂêçÁß∞ (ÁïôÁ©∫Ëá™Âä®ÁîüÊàê)">
                <select id="cpuLimit">
                    <option value="1">1 CPU</option>
                    <option value="2" selected>2 CPU</option>
                    <option value="4">4 CPU</option>
                </select>
                <select id="memoryLimit">
                    <option value="2">2Gi ÂÜÖÂ≠ò</option>
                    <option value="4" selected>4Gi ÂÜÖÂ≠ò</option>
                    <option value="8">8Gi ÂÜÖÂ≠ò</option>
                </select>
                <select id="storageSize">
                    <option value="10">10Gi Â≠òÂÇ®</option>
                    <option value="20" selected>20Gi Â≠òÂÇ®</option>
                    <option value="50">50Gi Â≠òÂÇ®</option>
                </select>
            </div>
            <button class="btn btn-success" onclick="createPod()">ÂàõÂª∫ Pod</button>
            <div id="createResponse" class="response-box" style="display:none;"></div>
        </div>
        
        <!-- Pod ÂàóË°® -->
        <div class="test-section">
            <div class="test-header">
                <h2>üìã ÊàëÁöÑ Pod ÂàóË°®</h2>
                <button class="btn btn-primary" onclick="listPods()">Âà∑Êñ∞ÂàóË°®</button>
            </div>
            <div id="podListContainer">
                <div class="loading">ÁÇπÂáª"Âà∑Êñ∞ÂàóË°®"Êü•ÁúãÊÇ®ÁöÑ Pod</div>
            </div>
        </div>
        
        <!-- Pod ËØ¶ÊÉÖ -->
        <div class="test-section">
            <div class="test-header">
                <h2>üîç Pod ËØ¶ÊÉÖ</h2>
            </div>
            <div class="input-group">
                <input type="text" id="detailPodName" placeholder="ËæìÂÖ• Pod ÂêçÁß∞">
                <button class="btn btn-primary" onclick="getPodDetail()">Ëé∑ÂèñËØ¶ÊÉÖ</button>
            </div>
            <div id="detailResponse" class="response-box" style="display:none;"></div>
        </div>
        
        <!-- Âà†Èô§ Pod -->
        <div class="test-section">
            <div class="test-header">
                <h2>üóëÔ∏è Âà†Èô§ Pod</h2>
            </div>
            <div class="input-group">
                <input type="text" id="deletePodName" placeholder="ËæìÂÖ•Ë¶ÅÂà†Èô§ÁöÑ Pod ÂêçÁß∞">
                <button class="btn btn-danger" onclick="deletePod()">Âà†Èô§ Pod</button>
            </div>
            <div id="deleteResponse" class="response-box" style="display:none;"></div>
        </div>
        
        <!-- Pod Êìç‰Ωú -->
        <div class="test-section">
            <div class="test-header">
                <h2>üéÆ Pod Êìç‰Ωú</h2>
            </div>
            <div class="input-group">
                <input type="text" id="actionPodName" placeholder="ËæìÂÖ• Pod ÂêçÁß∞">
                <select id="actionType">
                    <option value="stop">ÂÅúÊ≠¢</option>
                    <option value="restart">ÈáçÂêØ</option>
                </select>
                <button class="btn btn-warning" onclick="performAction()">ÊâßË°åÊìç‰Ωú</button>
            </div>
            <div id="actionResponse" class="response-box" style="display:none;"></div>
        </div>
        
        <!-- Êõ¥Êñ∞ Pod ÈÖçÁΩÆ -->
        <div class="test-section">
            <div class="test-header">
                <h2>üîß Êõ¥Êñ∞ Pod ÈÖçÁΩÆ</h2>
            </div>
            <div class="input-group">
                <input type="text" id="updatePodName" placeholder="Pod ÂêçÁß∞">
                <select id="updateCpu">
                    <option value="">CPU (‰∏çÂèò)</option>
                    <option value="1">1 CPU</option>
                    <option value="2">2 CPU</option>
                    <option value="4">4 CPU</option>
                </select>
                <select id="updateMemory">
                    <option value="">ÂÜÖÂ≠ò (‰∏çÂèò)</option>
                    <option value="2">2Gi</option>
                    <option value="4">4Gi</option>
                    <option value="8">8Gi</option>
                </select>
                <button class="btn btn-warning" onclick="updatePod()">Êõ¥Êñ∞ÈÖçÁΩÆ</button>
            </div>
            <div id="updateResponse" class="response-box" style="display:none;"></div>
        </div>
    </div>
    
    <script>
        // Âä®ÊÄÅÈÖçÁΩÆÂèòÈáè
        let API_URL = 'http://api.vnc.service.thinkgs.cn';
        let API_TOKEN = 'sk-njHDNMrSaVZH0MNQFd8607F6E52d4a5386Aa88A68f5583A1';
        
        // Êõ¥Êñ∞ÈÖçÁΩÆ
        function updateConfig() {
            API_URL = document.getElementById('apiUrlInput').value;
            API_TOKEN = document.getElementById('apiTokenInput').value;
            
            // ‰øùÂ≠òÂà∞localStorage
            localStorage.setItem('api_url', API_URL);
            localStorage.setItem('current_token', API_TOKEN);
            
            showConfigStatus('ÈÖçÁΩÆÂ∑≤Êõ¥Êñ∞', 'success');
            
            // ÈáçÊñ∞Ê£ÄÊü•ÂÅ•Â∫∑Áä∂ÊÄÅ
            checkHealth();
        }
        
        // ‰øùÂ≠òTokenÂà∞ÂàóË°®
        function saveToken() {
            const token = document.getElementById('apiTokenInput').value;
            if (!token) {
                showConfigStatus('ËØ∑ËæìÂÖ•Token', 'error');
                return;
            }
            
            // Ëé∑ÂèñÂ∑≤‰øùÂ≠òÁöÑtokens
            let savedTokens = JSON.parse(localStorage.getItem('saved_tokens') || '[]');
            
            // Ê∑ªÂä†Êñ∞tokenÔºàÂ¶ÇÊûú‰∏çÂ≠òÂú®Ôºâ
            if (!savedTokens.includes(token)) {
                savedTokens.push(token);
                localStorage.setItem('saved_tokens', JSON.stringify(savedTokens));
                loadSavedTokens();
                showConfigStatus('TokenÂ∑≤‰øùÂ≠ò', 'success');
            } else {
                showConfigStatus('TokenÂ∑≤Â≠òÂú®', 'warning');
            }
        }
        
        // Âä†ËΩΩÂ∑≤‰øùÂ≠òÁöÑTokens
        function loadSavedTokens() {
            const savedTokens = JSON.parse(localStorage.getItem('saved_tokens') || '[]');
            const selector = document.getElementById('tokenSelector');
            
            // Ê∏ÖÁ©∫ÈÄâÈ°π
            selector.innerHTML = '<option value="">ÈÄâÊã©Â∑≤‰øùÂ≠òÁöÑToken...</option>';
            
            // Ê∑ªÂä†‰øùÂ≠òÁöÑtokens
            savedTokens.forEach((token, index) => {
                const option = document.createElement('option');
                option.value = token;
                option.text = `Token ${index + 1}: ${token.substring(0, 20)}...`;
                selector.appendChild(option);
            });
            
            // Ê∑ªÂä†Ê∏ÖÈô§ÈÄâÈ°π
            if (savedTokens.length > 0) {
                const clearOption = document.createElement('option');
                clearOption.value = 'CLEAR_ALL';
                clearOption.text = '--- Ê∏ÖÈô§ÊâÄÊúâ‰øùÂ≠òÁöÑToken ---';
                clearOption.style.color = 'red';
                selector.appendChild(clearOption);
            }
        }
        
        // ÈÄâÊã©Token
        function selectToken() {
            const selector = document.getElementById('tokenSelector');
            const selectedToken = selector.value;
            
            if (selectedToken === 'CLEAR_ALL') {
                if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâ‰øùÂ≠òÁöÑTokenÂêóÔºü')) {
                    localStorage.removeItem('saved_tokens');
                    loadSavedTokens();
                    showConfigStatus('ÊâÄÊúâTokenÂ∑≤Ê∏ÖÈô§', 'success');
                }
                selector.value = '';
            } else if (selectedToken) {
                document.getElementById('apiTokenInput').value = selectedToken;
                updateConfig();
            }
        }
        
        // ÊòæÁ§∫ÈÖçÁΩÆÁä∂ÊÄÅ
        function showConfigStatus(message, type) {
            const statusDiv = document.getElementById('configStatus');
            statusDiv.style.display = 'block';
            statusDiv.className = type === 'success' ? 'success-message' : 
                                  type === 'error' ? 'error-message' : 'success-message';
            statusDiv.innerHTML = message;
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 3000);
        }
        
        // ÈÄöÁî® API Ë∞ÉÁî®ÂáΩÊï∞
        async function callAPI(endpoint, method = 'GET', body = null) {
            const options = {
                method: method,
                headers: {
                    'Authorization': `Bearer ${API_TOKEN}`,
                    'Content-Type': 'application/json'
                }
            };
            
            if (body && method !== 'GET') {
                options.body = JSON.stringify(body);
            }
            
            try {
                const response = await fetch(`${API_URL}${endpoint}`, options);
                const data = await response.json();
                return { status: response.status, data: data };
            } catch (error) {
                return { status: 'error', data: { error: error.message } };
            }
        }
        
        // ÊòæÁ§∫ÂìçÂ∫î
        function showResponse(elementId, data, status) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            
            if (status >= 200 && status < 300) {
                element.innerHTML = `<span class="status-indicator status-success"></span>ÊàêÂäü (${status})\n\n${JSON.stringify(data, null, 2)}`;
            } else {
                element.innerHTML = `<span class="status-indicator status-error"></span>ÈîôËØØ (${status})\n\n${JSON.stringify(data, null, 2)}`;
            }
        }
        
        // ÂÅ•Â∫∑Ê£ÄÊü•
        async function checkHealth() {
            const result = await callAPI('/health');
            showResponse('healthResponse', result.data, result.status);
            
            const statusElement = document.getElementById('healthStatus');
            if (result.status === 200) {
                statusElement.innerHTML = '<span class="status-indicator status-success"></span>API ËøêË°åÊ≠£Â∏∏';
            } else {
                statusElement.innerHTML = '<span class="status-indicator status-error"></span>API ÂºÇÂ∏∏';
            }
        }
        
        // Â∞±Áª™Ê£ÄÊü•
        async function checkReady() {
            const result = await callAPI('/ready');
            showResponse('healthResponse', result.data, result.status);
        }
        
        // ÂàõÂª∫ Pod
        async function createPod() {
            const body = {
                cpu_limit: document.getElementById('cpuLimit').value,
                memory_limit: document.getElementById('memoryLimit').value + 'Gi',
                storage_size: document.getElementById('storageSize').value + 'Gi'
            };
            
            const podName = document.getElementById('createPodName').value;
            if (podName) {
                body.pod_name = podName;
            }
            
            const result = await callAPI('/api/v1/pods', 'POST', body);
            showResponse('createResponse', result.data, result.status);
            
            if (result.status === 200 || result.status === 201) {
                setTimeout(listPods, 1000);
            }
        }
        
        // ÂàóÂá∫ Pods
        async function listPods() {
            const container = document.getElementById('podListContainer');
            container.innerHTML = '<div class="loading">Âä†ËΩΩ‰∏≠...</div>';
            
            const result = await callAPI('/api/v1/pods');
            
            if (result.status === 200 && result.data.pods) {
                if (result.data.pods.length === 0) {
                    container.innerHTML = '<div class="loading">ÊöÇÊó† Pod</div>';
                } else {
                    container.innerHTML = '<div class="pod-list">' + 
                        result.data.pods.map(pod => `
                            <div class="pod-card">
                                <div class="pod-name">${pod.name}</div>
                                <div class="pod-info">Áä∂ÊÄÅ: ${pod.status}</div>
                                <div class="pod-info">CPU: ${pod.resources?.cpu || 'N/A'}</div>
                                <div class="pod-info">ÂÜÖÂ≠ò: ${pod.resources?.memory || 'N/A'}</div>
                                <div class="pod-info">Â≠òÂÇ®: ${pod.resources?.storage || 'N/A'}</div>
                                <div class="pod-info">ÂàõÂª∫Êó∂Èó¥: ${new Date(pod.created_at).toLocaleString()}</div>
                                ${pod.vnc_url ? `<div class="pod-info">VNC: <a href="${pod.vnc_url.replace('/novnc/vnc.html', '/vnc.html?path=user/' + pod.name.replace('vnc-', '') + '/websockify').replace('http://vnc.service.thinkgs.cn', 'http://vnc.service.thinkgs.cn:31290')}" target="_blank">ÊâìÂºÄVNC</a></div>` : ''}
                                ${pod.ssh_command ? `<div class="pod-info">SSH: ${pod.ssh_command}</div>` : ''}
                                <div class="pod-actions">
                                    <button class="btn btn-primary" onclick="document.getElementById('detailPodName').value='${pod.name}';getPodDetail()">ËØ¶ÊÉÖ</button>
                                    <button class="btn btn-warning" onclick="document.getElementById('actionPodName').value='${pod.name}';document.getElementById('actionType').value='restart';performAction()">ÈáçÂêØ</button>
                                    <button class="btn btn-danger" onclick="if(confirm('Á°ÆÂÆöÂà†Èô§?')){document.getElementById('deletePodName').value='${pod.name}';deletePod()}">Âà†Èô§</button>
                                </div>
                            </div>
                        `).join('') + 
                    '</div>';
                }
            } else {
                container.innerHTML = `<div class="error-message">Ëé∑Âèñ Pod ÂàóË°®Â§±Ë¥•: ${JSON.stringify(result.data)}</div>`;
            }
        }
        
        // Ëé∑Âèñ Pod ËØ¶ÊÉÖ
        async function getPodDetail() {
            const podName = document.getElementById('detailPodName').value;
            if (!podName) {
                alert('ËØ∑ËæìÂÖ• Pod ÂêçÁß∞');
                return;
            }
            
            const result = await callAPI(`/api/v1/pods/${podName}`);
            showResponse('detailResponse', result.data, result.status);
        }
        
        // Âà†Èô§ Pod
        async function deletePod() {
            const podName = document.getElementById('deletePodName').value;
            if (!podName) {
                alert('ËØ∑ËæìÂÖ•Ë¶ÅÂà†Èô§ÁöÑ Pod ÂêçÁß∞');
                return;
            }
            
            const result = await callAPI(`/api/v1/pods/${podName}`, 'DELETE');
            showResponse('deleteResponse', result.data, result.status);
            
            if (result.status === 200) {
                setTimeout(listPods, 1000);
            }
        }
        
        // ÊâßË°å Pod Êìç‰Ωú
        async function performAction() {
            const podName = document.getElementById('actionPodName').value;
            const action = document.getElementById('actionType').value;
            
            if (!podName) {
                alert('ËØ∑ËæìÂÖ• Pod ÂêçÁß∞');
                return;
            }
            
            const result = await callAPI(`/api/v1/pods/${podName}/${action}`, 'POST');
            showResponse('actionResponse', result.data, result.status);
            
            if (result.status === 200) {
                setTimeout(listPods, 2000);
            }
        }
        
        // Êõ¥Êñ∞ Pod ÈÖçÁΩÆ
        async function updatePod() {
            const podName = document.getElementById('updatePodName').value;
            if (!podName) {
                alert('ËØ∑ËæìÂÖ• Pod ÂêçÁß∞');
                return;
            }
            
            const body = {};
            const cpu = document.getElementById('updateCpu').value;
            const memory = document.getElementById('updateMemory').value;
            
            if (cpu) body.cpu_limit = cpu;
            if (memory) body.memory_limit = memory + 'Gi';
            
            if (Object.keys(body).length === 0) {
                alert('ËØ∑ÈÄâÊã©Ë¶ÅÊõ¥Êñ∞ÁöÑÈÖçÁΩÆ');
                return;
            }
            
            const result = await callAPI(`/api/v1/pods/${podName}`, 'PUT', body);
            showResponse('updateResponse', result.data, result.status);
            
            if (result.status === 200) {
                setTimeout(listPods, 2000);
            }
        }
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        window.onload = function() {
            // ‰ªélocalStorageÂä†ËΩΩ‰øùÂ≠òÁöÑÈÖçÁΩÆ
            const savedUrl = localStorage.getItem('api_url');
            const savedToken = localStorage.getItem('current_token');
            
            if (savedUrl) {
                document.getElementById('apiUrlInput').value = savedUrl;
                API_URL = savedUrl;
            }
            
            if (savedToken) {
                document.getElementById('apiTokenInput').value = savedToken;
                API_TOKEN = savedToken;
            }
            
            // Âä†ËΩΩ‰øùÂ≠òÁöÑTokenÂàóË°®
            loadSavedTokens();
            
            // Ê£ÄÊü•ÂÅ•Â∫∑Áä∂ÊÄÅ
            checkHealth();
            
            // ÊòæÁ§∫ÂΩìÂâçÁî®Êà∑‰ø°ÊÅØ
            showCurrentUser();
        };
        
        // ÊòæÁ§∫ÂΩìÂâçÁî®Êà∑‰ø°ÊÅØ
        async function showCurrentUser() {
            try {
                // ‰ªéToken‰∏≠ÊèêÂèñÁî®Êà∑‰ø°ÊÅØÔºàÂ¶ÇÊûúAPIÊîØÊåÅÔºâ
                const tokenParts = API_TOKEN.split('-');
                if (tokenParts.length > 1) {
                    showConfigStatus(`ÂΩìÂâçToken: ${API_TOKEN.substring(0, 20)}...`, 'success');
                }
            } catch (error) {
                console.log('Unable to extract user info from token');
            }
        }
    </script>
</body>
</html>